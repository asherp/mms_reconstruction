* updating docs
# 2020-02-11 10:30:35.735202: clock-out

* including example IDL code from Denton

# 2020-02-11 10:25:25.938974: clock-in

# 2020-01-28 09:25:41.979326: clock-out

* responding to emails

# 2020-01-28 09:16:04.926895: clock-in

# 2020-01-27 22:58:17.535020: clock-out

* cleaning up README
* added link to github
* preping website

# 2020-01-27 22:02:53.878382: clock-in

Submitting .93 hours from paper review

# 2019-12-10 20:06:06.626744: clock-out
* elightning

# 2019-12-10 18:55:10.637716: clock-in

# 2019-12-10 18:22:23.376873: clock-out
* E-lightning w/pat

# 2019-12-10 17:42:30.077478: clock-in

# 2019-12-10 10:53:54.484560: clock-out
* testing zoom meeting room

# 2019-12-10 10:52:36.006830: clock-in

# 2019-12-06 16:47:45.793536: clock-out
* working with pat

# 2019-12-06 13:30:04.175404: clock-in

# 2019-12-06 12:47:32.264699: clock-out
## Fig 1e (reproduction)

This movie shows an interactive session using the Kamodofied Denton analysis within a jupyter notebook. We reproduce Fig 1-e using Kamodo's functional interpolation api, allowing for interactive exploration of the data. We may also choose a custom time range from the available data, and an upcoming feature will be the application of the Denton analysis pipeline to events not covered in the paper.

https://youtu.be/GK19dXhr4Ww

## cdf_Kamodo interface

This movie shows an interactive jupyter notebook session to load data from the MMS spacecraft. 
The user specifies a cdf file (e.g. obtained from pyspedas), and kamodo generates
interpolation functions based on the variables and their dependencies.

## fpi data

Kamodo generates quick-look graphics through function inspection. For example,
this spectra image of the fpi instrument for the Aug 10 event is obtained from the Kamodofied cdf interface.
This interface can represent multi-dimensional variables as functions of multple variables (e.g. time and energy bin). 

# 2019-12-06 10:46:12.552524: clock-in: T-20m

# 2019-12-06 09:42:53.964772: clock-out

# 2019-12-06 08:22:00.880592: clock-in

# 2019-12-05 18:28:06.871092: clock-out
* Found nsmoothspan is not set!
* got Fig 9 working! https://www.youtube.com/watch?v=GVM8EeUO2Nw&feature=youtu.be

# 2019-12-05 17:46:39.609436: clock-in

# 2019-12-05 17:01:15.329955: clock-out
* finding out which polysolution I'm plotting - should be reduced quadratic (fig 9b)
* need to submit hours. Should include hours from paper review which were tracked separately

# 2019-12-05 15:14:47.369459: clock-in

# 2019-12-05 11:53:08.013125: clock-out
* reconstructing fieldlines in Pipeline
* got fieldlines to render again

# 2019-12-05 11:14:56.653712: clock-in

# 2019-12-04 16:51:58.455619: clock-out
* meeting with pat

Kamodofying Denton Reconstruction
> The Kamodofied Denton class provides a python interface for Denton et al's matlab analysis code using Oct2py. This allows each step of the analysis pipeline to be exposed as kamodo functions ready for visualization, including field line

* create an image of the logic of the denton construction?
* create a video exploring reconnection event
* write more blurbs
* create images of kamodofied cdflib? Anything we can show work I've done with mms and kamodo

# 2019-12-04 14:01:18.384452: clock-in

# 2019-12-04 13:29:56.099315: clock-out
* Writing blurb on visualization

> Visualization of the reconnection site is provided by Kameleon-live, a web visualization tool from the CCMC. Kameleon-live provides an exploratory, interactive 3D interface for MHD models hosted by the CCMC, whereby cut planes are defined by a set of sliders and colormaps for a given scalar quantity and field lines are seeded by clicking on the currently hovered plane.

# 2019-12-04 13:16:32.535471: clock-in

# 2019-11-27 16:57:40.702318: clock-out
* setting up bluetooth sharing for runfiles

# 2019-11-27 14:33:14.665441: clock-in

# 2019-11-27 14:28:33.002978: clock-out: T-10m

# 2019-11-27 14:04:49.944014: clock-in

# 2019-11-27 13:03:13.800276: clock-out

# 2019-11-27 12:43:55.949668: clock-in

# 2019-11-27 11:46:38.212480: clock-out
* there's something wrong with the components when loading

# 2019-11-27 10:09:55.966940: clock-in

# 2019-11-22 10:59:14.730854: clock-out
* Got fpi and fsm data loaded

# 2019-11-22 09:59:49.875950: clock-in

# 2019-11-19 16:48:34.562136: clock-out

# 2019-11-19 15:32:59.426699: clock-in

# 2019-11-19 14:06:18.829370: clock-out
* Loaded all data with cdflib!
* Spectral data not needed right now
* kamodofying cdflib!

# 2019-11-19 12:21:15.991936: clock-in

# 2019-11-19 10:51:31.959386: clock-out

# 2019-11-19 09:38:03.237321: clock-in

# 2019-11-18 17:12:56.040000: clock-out
* making issue on pysatCDF? There is already an issue on multidemensional cdf assigned to Asher...

# 2019-11-18 17:03:14.148349: clock-in

# 2019-11-18 15:09:55.405489: clock-out
* looking into why pysatCDF can't load some variable names

# 2019-11-18 14:42:30.875945: clock-in

# 2019-11-18 14:24:00.642767: clock-out
* Loading fpi data - ran into issues reading cdf

# 2019-11-18 12:44:09.254274: clock-in

# 2019-11-15 16:12:04.416511: clock-out
* Downloading data for range '2017-08-10 12:18:00','2017-08-10 12:19:00'

# 2019-11-15 16:03:28.735644: clock-in

# 2019-11-15 14:56:11.936773: clock-out

# 2019-11-15 14:26:42.904663: clock-in

# 2019-11-15 14:26:36.879614: clock-out: T-17m

# 2019-11-15 13:22:52.495535: clock-in

# 2019-11-15 11:41:48.346046: clock-out

# 2019-11-15 10:56:01.004152: clock-in

# 2019-11-15 10:37:04.610006: clock-out
* getting ftp access from poly for pat's run

# 2019-11-15 10:26:36.827333: clock-in

# 2019-11-14 19:44:25.108386: clock-out
* Trying to load l3 data doesn't work - it may require username/password
* Looking on cdaweb, L3 data isn't available!
* Set my lasp login in `~/mms_auth_info.pkl` - that works!

Tried this:

	variables = mms_load_fsm(trange = ['2017-07-11 22:00:00','2017-07-11 23:00:00'])
	
pyspedas presentation: http://spedas.org/mms/mms_gem_2019.pdf

# 2019-11-14 18:05:22.119528: clock-in

# 2019-11-14 15:51:59.223474: clock-out

# 2019-11-14 15:43:17.139656: clock-in

# 2019-11-14 14:03:01.255066: clock-out
* We need to generate mms_read_mag_pos_magBurst2.mat content from MakeAaProcess
* idl files basically load data then save to disk, which Matlab files load
* we just need the name of the routine that corresponds to the file matlab is trying to read
* hopefully can use mms_load_mec instead of mms_load_state
* Looking at rekamodoupdates
* ReadMmsIntro iburst=2 -> ReadMmsBurstProcess, MakeAaProcess

# 2019-11-14 11:05:14.687485: clock-in

# 2019-11-14 10:34:18.402794: clock-out
* loaded the christmas 2016 event with pysatCDF_Kamodo
* loaded the september 2018 event and visualized

# 2019-11-14 09:40:54.993739: clock-in

# 2019-11-12 14:16:38.951019: clock-out
* got kamodofied pysatCDF with mms fields working

# 2019-11-12 12:30:16.048548: clock-in

# 2019-11-12 11:47:58.382842: clock-out

# 2019-11-12 11:01:43.108847: clock-in

# 2019-11-12 10:42:58.146549: clock-out

# 2019-11-12 10:26:07.048270: clock-in

# 2019-11-12 10:18:54.587009: clock-out
* installing the latest pysat so I can import pysatCDF

# 2019-11-12 09:57:44.742674: clock-in

# 2019-11-11 16:43:52.293078: clock-out
* adding var_atts to stored tplot attributes... 
* notplot doesn't return the full array, only one column
* getting `no data loaded`

# 2019-11-11 15:32:10.489144: clock-in

# 2019-11-11 15:05:49.850018: clock-out
* working on pyspedas-kamodo

## meeting with Pat

Events to look at:
* 2016-12-24 15:03:00
* 2018-09-08 14:51:30-14:51:33 (this one is missing currents for one of the spacecraft)
* Show vector plots for spacecraft in 2d or 3d
* time shift plots so they line up
* might be able to use J_3 for J_4 where J_4 is missing data
* One month to AGU!

# 2019-11-11 12:26:03.446798: clock-in

# 2019-11-11 12:26:00.192497: clock-out: T-30m
* moved ~/git/pyspedas/spedas.ipynb to ~/git/mms/.

# 2019-11-11 11:23:12.759785: clock-in

# 2019-11-08 13:32:10.099029: clock-out
* moved kamodofied pyspedas into git/mms/pyspedas_kamodo

# 2019-11-08 12:25:09.249455: clock-in

# 2019-11-08 11:18:44.408861: clock-out
* setting up user password/login for lasp

# 2019-11-08 11:11:12.818257: clock-in

# 2019-11-08 11:09:56.305889: clock-out
* got kamodofied pyspedas!
* fixed deprecation errors in kamodo that were showing up in pyspedas_kamodo

# 2019-11-08 09:41:13.088176: clock-in

# 2019-11-07 12:01:58.079348: clock-out
* pyspedas
* got variables into pandas dataframe

# 2019-11-07 11:08:12.592701: clock-in

# 2019-11-07 11:07:11.376697: clock-out
* work on pyspedas

# 2019-11-07 11:05:19.500878: clock-in

# 2019-11-07 10:26:05.433768: clock-out
* FPI meeting - gave presentation on Denton-Kamodo interface

# 2019-11-07 08:30:42.313457: clock-in

# 2019-11-06 22:25:38.111188: clock-out

# 2019-11-06 21:28:09.585131: clock-in

# 2019-11-06 21:17:26.088614: clock-out

# 2019-11-06 21:14:23.079123: clock-in

# 2019-11-06 20:18:49.884907: clock-out: T-10m
* preparing talk

# 2019-11-06 19:06:30.324774: clock-in

# 2019-11-06 13:15:22.427279: clock-out
* updated pyspedas print var wrapper to preserve signature
* started building kamodo class for pyspedas

# 2019-11-06 11:31:33.624628: clock-in

# 2019-11-05 15:44:58.793988: clock-out
* trying to load data with pyspedas
* downloaded files to /Users/apembrok/git/mms/spedas_data/
* moved spedas notebook to /Users/apembrok/git/pyspedas
* got data to load, but metadata attributes are not being stored in pytplot's dictionary correctly

# 2019-11-05 12:12:40.977742: clock-in

# 2019-11-04 14:45:14.864435: clock-out
* continuing work on pysat MMS repo

# 2019-11-04 14:44:24.295839: clock-in

# 2019-10-30 15:56:55.364069: clock-out
* reviewing paper

# 2019-10-30 15:05:03.472256: clock-in

# 2019-10-23 16:22:53.736923: clock-out

# 2019-10-23 16:21:53.149976: clock-in

# 2019-10-23 09:46:43.657101: clock-out

# 2019-10-23 09:46:26.570269: clock-in

# 2019-10-23 07:47:31.893312: clock-out

# 2019-10-23 07:47:23.119716: clock-in

# 2019-10-22 12:28:36.187208: clock-out
* Creating new pysat MMS repo
* not sure who to charge development to, so will clock in/out there

# 2019-10-22 12:25:51.586766: clock-in

# 2019-10-22 08:34:54.965604: clock-out

# 2019-10-22 07:31:39.445955: clock-in: t-10m

# 2019-10-21 18:40:16.347861: clock-out
* Created notebook just for tracing
* Made documentation site 

# 2019-10-21 16:01:41.526969: clock-in

# 2019-09-27 16:47:52.029164: clock-out
* Looked at bringing in mms data
* MMS is not a registered pysat datasource
* HelioPy does have the data, however.
* Kamodofy HelioPy?
* You should kamodofy the solver portion of the Denton class first

# 2019-09-27 16:44:05.900538: clock-in

# 2019-09-24 12:26:17.654250: clock-out
* Finally able to reproduce 3d figure
* Must use orthographic projection and set x,y,z ranges to +/- 2.5

# 2019-09-24 11:56:08.986150: clock-in

# 2019-09-24 11:17:58.585094: clock-out

# 2019-09-24 10:57:42.737343: clock-in

# 2019-09-24 10:40:57.097485: clock-out

# 2019-09-24 09:24:02.423886: clock-in

# 2019-09-23 19:09:38.992719: clock-out

# 2019-09-23 18:24:03.295200: clock-in

# 2019-09-23 16:57:15.731618: clock-out

* working on field visualization
* checking if B(x_1(t), t) = B_1(t) - they don't match!

# 2019-09-23 14:46:33.197125: clock-in

# 2019-09-13 14:53:15.978872: clock-out
* Magnetic field trace bugs
* Still getting conflicting field line shape and vectors

# 2019-09-13 12:28:51.332360: clock-in

# 2019-09-12 16:26:24.646145: clock-out

* Continuing field line integration
* Not sure why the integrator is not following the field

# 2019-09-12 15:32:27.581460: clock-in

# 2019-09-12 13:07:03.145751: clock-out
* Started field line tracing

# 2019-09-12 12:29:25.073245: clock-in

# 2019-09-03 13:06:46.121506: clock-out
* Got normalized expression for fields
* Need to change integration symbol in kamodo

# 2019-09-03 12:24:49.356981: clock-in

# 2019-09-03 11:34:21.525229: clock-out

# 2019-09-03 11:27:00.923804: clock-in

# 2019-09-03 11:01:16.212944: clock-out
* Working on streamlines
* Normalizing fields

# 2019-09-03 10:00:35.149993: clock-in

# 2019-09-02 17:38:46.527376: clock-out
* Got Bfield at arbitrary position
* Got Bfield at arbitrary time
* Looking at 3D plot

# 2019-09-02 14:22:07.172379: clock-in

# 2019-09-02 13:03:07.146726: clock-out
* functionalized 2D vector matlab code
* generated 2D vector plot similar to Figure 2

# 2019-09-02 11:42:59.973564: clock-in

# 2019-09-02 11:33:07.023394: clock-out
* Added observed current at spacecraft
* Adding vector plots

# 2019-09-02 10:38:41.808706: clock-in

# 2019-08-31 13:05:30.809511: clock-out
* pandas 

# 2019-08-31 12:46:40.914608: clock-in

# 2019-08-30 18:41:34.710243: clock-out
* refactored Denton class

# 2019-08-30 16:51:47.178243: clock-in

# 2019-08-30 15:54:36.623316: clock-out
* Adding observed fields

# 2019-08-30 15:08:38.508036: clock-in

# 2019-08-30 13:13:44.887412: clock-out
* Creating Reconstruction class "Denton"

# 2019-08-30 10:50:13.896577: clock-in

# 2019-08-30 10:47:19.185791: clock-out

# 2019-08-30 09:53:52.875040: clock-in

# 2019-08-29 17:26:27.508461: clock-out
* kamodofying variables

# 2019-08-29 15:50:39.484858: clock-in

# 2019-08-29 14:42:44.162859: clock-out: kamodofication
* kamodofying reconstruction

# 2019-08-29 13:09:02.864716: clock-in

# 2019-08-29 12:01:43.113701: clock-out
* got figure 1 run with octave-python wrapper

# 2019-08-29 10:42:07.150572: clock-in

# 2019-08-29 10:12:57.540840: clock-out: refactoring matlab
* functionalizing matlab code

# 2019-08-29 09:36:13.907410: clock-in

# 2019-08-28 19:24:47.425580: clock-out: implemented oct2py version
* Using Oct2py to get more accurate solution


# 2019-08-28 17:28:04.167681: clock-in

# 2019-08-27 16:55:35.794293: clock-out
* Testing original code in octave
* Installing octave dependencies for optim, which has sqlin function
* Reproduced figure in octave!
* Should be able to compare arrays to see what goes wrong in python
* Comparing the deviations, the solutions for matlab are much better fits than what I'm producing in python

# 2019-08-27 14:36:53.267068: clock-in

# 2019-08-27 13:01:53.889289: clock-out
* Implemented new python sqlin function
* Still not getting good fit
* Testing lsqlin against spec yields good results
* Perhaps need a plot of dev 
* Some spacecraft fits are closer than others, but not really good agreement

# 2019-08-27 09:54:04.589499: clock-in

# 2019-08-26 22:36:45.275019: clock-out
* looking at scipy's least_squares solver
May have found an alternative:
* http://maggotroot.blogspot.ch/2013/11/constrained-linear-least-squares-in.html
* https://github.com/KasparP/PSI_simulations/blob/master/Python/SLAPMi/lsqlin.py
* https://cvxopt.org/install/index.html

# 2019-08-26 20:58:30.063041: clock-in

# 2019-08-26 19:19:54.102817: clock-out

# 2019-08-26 17:49:54.964387: clock-in

# 2019-08-26 16:05:12.297710: clock-out
* The fits are still scrambled
* Splitting off iSystem=2 code
* Checking if referencing any unpadded variables
* Got much better graphs using a different least squares method
* Need to compare closely with figures

# 2019-08-26 12:45:15.156882: clock-in

# 2019-08-26 12:09:51.871169: clock-out: T-5m
* Checking solution
* Comparing with plots

# 2019-08-26 11:30:41.979566: clock-in

# 2019-08-25 01:07:29.008290: clock-out
* Investigating flippening
* Found the problem! From the numpy docs, the eigenvectors are:

> The normalized (unit “length”) eigenvectors, such that the column v[:,i] is the eigenvector corresponding to the eigenvalue w[i].
So when we get the sorted eigenvectors, we have to index v[:,isort] instead of v[isort]

# 2019-08-24 23:42:36.954438: clock-in

# 2019-08-24 11:09:51.635223: clock-out
* The dot product may be causing the flippening

# 2019-08-24 10:40:41.552612: clock-in

# 2019-08-23 20:49:09.555353: clock-out
* Bfit calculation
* Plotting
* Something goes wrong at mv calculation

# 2019-08-23 19:21:16.259283: clock-in

# 2019-08-23 16:30:46.460946: clock-out
* computed solution for each time step
* lots of variance in solution

# 2019-08-23 15:17:10.120207: clock-in

# 2019-08-23 15:14:57.450442: clock-out
* Looking at sequential least squares
* constructed callable function to be minimized
* added equality constraint
* minimized function

# 2019-08-23 13:19:53.913123: clock-in

# 2019-08-23 12:01:50.563258: clock-out
* PolySolution
* Padding arrays just prior to solver
* choosing a linear least squares solver

# 2019-08-23 11:01:25.738946: clock-in

# 2019-08-22 17:29:33.998244: clock-out
* working through PolySolution

# 2019-08-22 15:36:05.528427: clock-in

# 2019-08-22 14:17:29.855856: clock-out
* pushing to private repo
* finished polysetup

# 2019-08-22 12:15:54.279334: clock-in

# 2019-08-22 12:15:47.712709: clock-out: T-12m

# 2019-08-22 11:18:11.001635: clock-in

# 2019-08-21 18:21:13.254683: clock-out

# 2019-08-21 16:56:58.801777: clock-in

# 2019-08-21 16:35:56.760909: clock-out
* Working through polysetup

# 2019-08-21 14:57:41.953489: clock-in

# 2019-08-21 13:01:24.897211: clock-out
* plotting arrays
* defining arange so it returns 0-indexed values

# 2019-08-21 12:27:40.197024: clock-in

# 2019-08-21 12:02:54.635297: clock-out

* started plotting

# 2019-08-21 11:09:45.006414: clock-in

# 2019-08-20 17:51:37.446477: clock-out
* moving averages

# 2019-08-20 14:42:58.598844: clock-in

# 2019-08-20 14:31:55.684581: clock-out

# 2019-08-20 14:01:12.093212: clock-in

# 2019-08-20 13:22:07.831622: clock-out

# 2019-08-20 12:50:05.585350: clock-in

# 2019-08-20 12:35:58.762521: clock-out
* going to try smop with python 2.7
* Loading data from matlab save files

# 2019-08-20 11:20:14.096712: clock-in

# 2019-08-19 17:12:20.316343: clock-out
* working through PolySetup
* most of the fitting is in PolySolution

# 2019-08-19 15:34:22.080843: clock-in

# 2019-08-16 17:43:49.167917: clock-out
* parsing into python, smop was written for 2.7 so bugfixes..

# 2019-08-16 17:12:08.756158: clock-in

# 2019-08-09 00:19:46.950974: clock-out
* looking at python-matlab bridge https://github.com/arokem/python-matlab-bridge
* Also looking for auto-translator smop - looks promising!
* Got utf-8 reading errors - try copy/pasting

# 2019-08-08 23:44:14.862557: clock-in

# 2019-08-08 23:39:05.758576: clock-out
* installed octave and jupyter with gnuplot
* tested sample notebook
* Loaded most of the code into jupyter
* Need to break up the code and run in sections

# 2019-08-08 22:09:05.490844: clock-in

# 2019-08-05 10:12:41.114856: clock-out

# 2019-08-05 09:49:08.269708: clock-in

# 2019-08-04 17:35:26.180635: clock-out: T-5m

# 2019-08-04 17:22:39.701500: clock-in

# 2019-08-03 11:00:58.565321: clock-out
* Reading through paper

# 2019-08-03 09:42:57.878209: clock-in: T-10m

